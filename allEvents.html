<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<script type="text/javascript" src="http://opendatahacklab.org/sparql_suite/sparql_processor.js"></script>
<script type="text/javascript" src="http://opendatahacklab.org/sparql_suite/event_sparql_processor.js"></script>
</head>



<body>
<header>
<h1>Agenda unica del movimento catanese</h1>
<p>Inserire qui una breve descrizione</p>
</header>

<p id="demo"></p>
 <table id="events">
  <tr> 
   <th>Data</th>
   <th>Ora</th>
   <th>Titolo</th>
   <th>Link</th>
  </tr>
 </table>
<script type="text/javascript">
var container = document.getElementById("events");

var processEventFunction = function(event, isNext){	
	
	var trevents = document.createElement("tr");
	container.appendChild(trevents);
	
	var tdData = document.createElement("td");
	var data = new Date(event.timeStart);
	var giorno = data.getDate();
	if (giorno == "1" || giorno == "2" || giorno == "3" || giorno == "4" || giorno == "5" || giorno == "6" || giorno == "7" || giorno == "8" || giorno == "9" ){
	   giorno = "0" + giorno;	
	}
	var mese = data.getMonth();
	if (mese == "1" || mese == "2" ||mese == "3" || mese == "4" || mese == "5" || mese == "6" || mese == "7" || mese == "8" || mese == "9"){
		mese = "0" + mese ;
		}
	var stringaData=document.createTextNode(giorno  + "/" + mese + "/" + data.getFullYear());
	tdData.appendChild(stringaData);
	trevents.appendChild(tdData);
	
	var tdOra = document.createElement("td");
	var data = new Date(event.timeStart);
	var minuti = data.getMinutes();
	if (minuti == "0" || minuti == "1" || minuti == "2" || minuti == "3" || minuti == "4" || minuti == "5" || minuti == "6" || minuti == "7" || minuti == "8" || minuti == "9"){
		minuti = "0" + minuti;
	}
	var ore = data.getHours();
	if(ore == "0" || ore == "1" || ore == "2" || ore == "3" || ore == "4" || ore == "5" || ore == "6" || ore == "7" || ore == "8" || ore == "9"){
		ore = "0" + ore;
	}
	var ora=document.createTextNode( ore + ":" + minuti);
	tdOra.appendChild(ora);
	trevents.appendChild(tdOra);
	
	var tdTitolo = document.createElement("td");
	var tdTestoTitolo = document.createTextNode(event.eventName);
	tdTitolo.appendChild(tdTestoTitolo);
	trevents.appendChild(tdTitolo);
	
	var tdLink = document.createElement("td");
	trevents.appendChild(tdLink);
};


function EventProcessor(){
	this.processPast = function(event){
		processEventFunction(event, false);
	};
	this.processNext = function(event){
		processEventFunction(event, true);
	};
	this.processFuture = function(event){
		processEventFunction(event, false);
	};
	this.flush = function(){ 
	};
}

var p = new EventQueryProcessor(new EventProcessor(), new Date());

sparql_query("http://dydra.com/cristianolongo/odhl/sparql", p);
	</script>
</body>
</html>